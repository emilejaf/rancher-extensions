{"version":3,"file":"node-driver-0.1.0.umd.min.machine-config.js","mappings":"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","sources":["webpack://node-driver-0.1.0/./openstack.ts","webpack://node-driver-0.1.0/./machine-config/viarezo.vue","webpack://node-driver-0.1.0/./machine-config/viarezo.vue?393c","webpack://node-driver-0.1.0/./machine-config/viarezo.vue?6965","webpack://node-driver-0.1.0/./machine-config/viarezo.vue?ef11","webpack://node-driver-0.1.0/./.shell/assets/brand/ sync ^\\.\\/.*\\/metadata\\.json$"],"sourcesContent":["/**\n * Helper class for dealing with the Openstack API\n *\n * Openstack API Docs:\n *\n *  https://docs.openstack.org/api-ref/compute/index.html\n *\n */\nexport class Openstack {\n  public domainId: string = \"\";\n  public domainName: string = \"\";\n  public endpoint: string = \"\";\n  public projectDomainName: string = \"\";\n  public projectId: string = \"\";\n  public username: string = \"\";\n  public password: string = \"\";\n  public token: string = \"\";\n  public region: string = \"\";\n  private catalog: any;\n  private endpoints: any;\n  private userId: string = \"\";\n\n  private $dispatch: any;\n\n  public regionsFromCatalog: any[] = [];\n\n  constructor($store: any, obj: any) {\n    if (obj.annotations) {\n      Object.keys(obj.annotations).forEach((key) => {\n        const p = key.split(\"/\");\n\n        if (p.length === 2 && p[0] === \"viarezo.cattle.io\") {\n          const field = p[1];\n\n          (this as any)[field] = obj.annotations[key];\n        }\n      });\n    } else {\n      // Copy from options to this\n      Object.keys(obj).forEach((key) => {\n        (this as any)[key] = obj[key];\n      });\n    }\n\n    this.$dispatch = $store.dispatch;\n  }\n\n  public async getToken() {\n    const endpoint = this.endpoint.replace(/^https?:\\/\\//, \"\");\n    const baseUrl = `/meta/proxy/${endpoint}`;\n    const url = `${baseUrl}/auth/tokens`;\n\n    const data = {\n      auth: {\n        identity: {\n          methods: [\"password\"],\n          password: {\n            user: {\n              name: this.username,\n              domain: { name: this.domainName },\n              password: this.password,\n            },\n          },\n        },\n      },\n    };\n\n    if (this.projectId) {\n      (data as any).auth.scope = {\n        project: {\n          id: this.projectId,\n        },\n      };\n    }\n\n    const headers = { Accept: \"application/json\" };\n\n    try {\n      const res = await this.$dispatch(\n        \"management/request\",\n        {\n          url,\n          headers,\n          method: \"POST\",\n          redirectUnauthorized: false,\n          data,\n        },\n        { root: true }\n      );\n\n      if (res._status === 502) {\n        return {\n          error:\n            \"Could not proxy request - URL may not be in Rancher's allow list\",\n        };\n      }\n\n      const token = res._headers[\"x-subject-token\"];\n\n      this.token = token;\n\n      this.userId = res?.token?.user?.id;\n\n      this.domainId = res?.token?.project?.domain?.id;\n\n      console.log(this.domainId);\n\n      this.regionsFromCatalog = [];\n\n      if ((data as any).auth.scope && res?.token) {\n        this.catalog = res.token.catalog;\n        this.endpoints = {};\n        this.catalog.forEach((service: any) => {\n          const iface = service.endpoints.find(\n            (svc: any) => svc.interface === \"public\"\n          );\n\n          // Only use the interfaces for the region\n          if (iface && iface.region_id === this.region) {\n            this.endpoints[service.type] = iface.url;\n          }\n\n          if (iface && service.type === \"compute\") {\n            if (!this.regionsFromCatalog.includes(iface.region_id)) {\n              this.regionsFromCatalog.push(iface.region_id);\n            }\n          }\n        });\n      }\n\n      this.regionsFromCatalog = this.regionsFromCatalog.map((id) => {\n        return { id };\n      });\n\n      return res;\n    } catch (e) {\n      console.error(e); // eslint-disable-line no-console\n\n      return { error: e };\n    }\n  }\n\n  public async getFlavors(value: any, initial?: string) {\n    return await this.getOptions(\n      value,\n      \"/flavors\",\n      \"flavors\",\n      undefined,\n      initial\n    );\n  }\n\n  public async getImages(value: any, initial?: string) {\n    return await this.getOptions(\n      value,\n      \"/images/detail\",\n      \"images\",\n      undefined,\n      initial\n    );\n  }\n\n  public async getKeyPairs(value: any, initial?: string) {\n    return await this.getOptions(\n      value,\n      \"/os-keypairs\",\n      \"keypairs\",\n      (v: any) => v.keypair,\n      initial\n    );\n  }\n\n  public async getSecurityGroups(value: any, initial?: string) {\n    return await this.getOptions(\n      value,\n      \"/os-security-groups\",\n      \"security_groups\",\n      undefined,\n      initial\n    );\n  }\n\n  public async getFloatingIpPools(value: any, initial?: string) {\n    return await this.getOptions(\n      value,\n      \"/os-floating-ip-pools\",\n      \"floating_ip_pools\",\n      undefined,\n      initial\n    );\n  }\n\n  public async getNetworkNames(value: any, initial?: string) {\n    return await this.getOptions(\n      value,\n      \"/os-tenant-networks\",\n      \"networks\",\n      (network: any) => {\n        return {\n          ...network,\n          name: network.label,\n        };\n      },\n      initial\n    );\n  }\n\n  public async getAvailabilityZones(value: any, initial?: string) {\n    return await this.getOptions(\n      value,\n      \"/os-availability-zone\",\n      \"availabilityZoneInfo\",\n      (zone: any) => {\n        return {\n          ...zone,\n          name: zone.zoneName,\n        };\n      },\n      initial\n    );\n  }\n\n  public async getOptions(\n    value: any,\n    api: string,\n    field: string,\n    mapper?: Function,\n    initial?: string\n  ) {\n    // We are fetching the data for the options\n    value.busy = true;\n    value.enabled = true;\n    value.selected = \"\";\n\n    const res = await this.makeComputeRequest(api);\n\n    if (res && (res as any)[field]) {\n      let list = (res as any)[field] || [];\n\n      if (mapper) {\n        list = list.map((k: any) => mapper(k));\n      }\n\n      value.options = this.convertToOptions(list);\n      value.busy = false;\n\n      if (initial) {\n        const found = value.options.find(\n          (option: any) => option.value.id === initial\n        );\n\n        if (found) {\n          value.selected = found.value;\n        }\n      }\n\n      if (!value.selected && value.options.length > 0) {\n        value.selected = value.options[0].value;\n      }\n    } else {\n      value.options = [];\n      value.selected = null;\n      value.busy = false;\n      value.enabled = false;\n    }\n  }\n\n  public async makeComputeRequest(api: string) {\n    const endpoint = this.endpoints[\"compute\"].replace(/^https?:\\/\\//, \"\");\n    const baseUrl = `/meta/proxy/${endpoint}`;\n    const url = `${baseUrl}${api}`;\n\n    const headers = {\n      Accept: \"application/json\",\n      \"X-Auth-Token\": this.token,\n    };\n\n    try {\n      const res = await this.$dispatch(\n        \"management/request\",\n        {\n          url,\n          headers,\n          method: \"GET\",\n          redirectUnauthorized: false,\n        },\n        { root: true }\n      );\n\n      return res;\n    } catch (e) {\n      console.error(e); // eslint-disable-line no-console\n    }\n  }\n\n  public async getProjects() {\n    const endpoint = this.endpoint.replace(/^https?:\\/\\//, \"\");\n    const baseUrl = `/meta/proxy/${endpoint}`;\n\n    const headers = {\n      Accept: \"application/json\",\n      \"X-Auth-Token\": this.token,\n    };\n\n    try {\n      const res = await this.$dispatch(\n        \"management/request\",\n        {\n          url: `${baseUrl}/users/${this.userId}/projects`,\n          headers,\n          method: \"GET\",\n          redirectUnauthorized: false,\n        },\n        { root: true }\n      );\n\n      return res?.projects;\n    } catch (e) {\n      console.error(e); // eslint-disable-line no-console\n\n      return { error: e };\n    }\n  }\n\n  public async getRegions() {\n    const endpoint = this.endpoint.replace(/^https?:\\/\\//, \"\");\n    const baseUrl = `/meta/proxy/${endpoint}`;\n\n    const headers = {\n      Accept: \"application/json\",\n      \"X-Auth-Token\": this.token,\n    };\n\n    try {\n      const res = await this.$dispatch(\n        \"management/request\",\n        {\n          url: `${baseUrl}/regions`,\n          headers,\n          method: \"GET\",\n          redirectUnauthorized: false,\n        },\n        { root: true }\n      );\n\n      return res?.regions;\n    } catch (e) {\n      console.error(e); // eslint-disable-line no-console\n\n      return { error: e };\n    }\n  }\n\n  private convertToOptions(list: any) {\n    const sorted = (list || []).sort((a: any, b: any) =>\n      a.name.localeCompare(b.name)\n    );\n\n    return sorted.map((p: any) => {\n      return {\n        label: p.name,\n        value: p,\n      };\n    });\n  }\n}\n","<script>\nimport Loading from '@shell/components/Loading';\nimport { Banner } from '@components/Banner';\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport { NORMAN, SECRET } from '@shell/config/types';\nimport { stringify } from '@shell/utils/error';\nimport { _VIEW } from '@shell/config/query-params';\nimport { Openstack } from '../openstack';\n\nfunction initOptions() {\n  return {\n    options: [],\n    selected: null,\n    busy: false,\n    enabled: false,\n  };\n}\n\nexport default {\n  components: {\n    Banner, Loading, LabeledInput, LabeledSelect\n  },\n\n  mixins: [CreateEditView],\n\n  props: {\n    uuid: {\n      type: String,\n      required: true,\n    },\n\n    cluster: {\n      type: Object,\n      default: () => ({})\n    },\n\n    credentialId: {\n      type: String,\n      required: true,\n    },\n\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n\n    busy: {\n      type: Boolean,\n      default: false\n    },\n\n    provider: {\n      type: String,\n      required: true,\n    }\n  },\n\n  async fetch() {\n    this.errors = [];\n    if (!this.credentialId) {\n      return;\n    }\n\n    if (this.mode === _VIEW) {\n      this.initForViewMode();\n\n      return;\n    }\n\n    try {\n      this.credential = await this.$store.dispatch('rancher/find', { type: NORMAN.CLOUD_CREDENTIAL, id: this.credentialId });\n    } catch (e) {\n      this.credential = null;\n    }\n\n    // Try and get the secret for the Cloud Credential as we need the plain-text password\n    try {\n      const id = this.credentialId.replace(':', '/');\n      const secret = await this.$store.dispatch('management/find', { type: SECRET, id });\n      const data = secret.data['viarezocredentialConfig-password'];\n      const password = atob(data);\n\n      this.password = password;\n      this.ready = true;\n    } catch (e) {\n      this.password = '';\n      console.error(e); // eslint-disable-line no-console\n    }\n\n    this.authenticating = true;\n\n    const os = new Openstack(this.$store, this.credential);\n\n    os.password = this.password;\n\n    this.os = os;\n\n    // Fetch a token - if this succeeds, kick off async fetching the lists we need\n    this.os.getToken().then((res) => {\n      if (res.error) {\n        this.authenticating = false;\n        this.$emit('validationChanged', false);\n\n        this.errors.push('Unable to authenticate with the OpenStack server');\n\n        return;\n      }\n\n      this.authenticating = false;\n\n      os.getFlavors(this.flavors, this.value?.flavorName);\n      os.getImages(this.images, this.value?.imageName);\n      os.getSecurityGroups(this.securityGroups, this.value?.secGroups);\n      os.getNetworkNames(this.networks, this.value?.netName);\n    });\n\n    this.$emit('validationChanged', true);\n  },\n\n  data() {\n    return {\n      authenticating: false,\n      ready: false,\n      os: null,\n      password: null,\n      flavors: initOptions(),\n      images: initOptions(),\n      securityGroups: initOptions(),\n      networks: initOptions(),\n      sshUser: this.value?.sshUser || 'ubuntu',\n      errors: null,\n    };\n  },\n\n  watch: {\n    'credentialId'() {\n      this.$fetch();\n    },\n  },\n\n  methods: {\n    stringify,\n\n    initForViewMode() {\n      this.fakeSelectOptions(this.flavors, this.value?.flavorId);\n      this.fakeSelectOptions(this.images, this.value?.imageId);\n      this.fakeSelectOptions(this.securityGroups, this.value?.secGroups);\n      this.fakeSelectOptions(this.networks, this.value?.netId);\n    },\n\n    fakeSelectOptions(list, value) {\n      list.busy = false;\n      list.enabled = false;\n      list.options = [];\n\n      if (value) {\n        list.options.push({\n          label: value,\n          value,\n        });\n      }\n\n      list.selected = value;\n    },\n\n    syncValue() {\n      // Note: We don't need to provide password as this is picked up via the credential\n\n      // Copy the values from the form to the correct places on the value\n      this.value.authUrl = this.os.endpoint;\n      this.value.domainId = this.os.domainId;\n      this.value.username = this.os.username;\n      this.value.projectId = this.os.projectId;\n      this.value.flavorId = this.flavors.selected?.id;\n      this.value.imageId = this.images.selected?.id;\n      this.value.netId = this.networks.selected?.id;\n      this.value.secGroups = this.securityGroups.selected?.name;\n      this.value.sshUser = this.sshUser;\n      this.value.region = this.os.region;\n      //TODO this.value.serverGroupName = \n\n      // Not configurable\n      this.value.endpointType = 'publicURL';\n      this.value.availabilityZone = \"nova\";\n\n      console.log(this.value);\n    },\n\n    test() {\n      this.syncValue();\n    }\n  }\n};\n</script>\n\n<template>\n  <div>\n    <Loading v-if=\"$fetchState.pending\" :delayed=\"true\" />\n    <div v-if=\"errors.length\">\n      <div v-for=\"(err, idx) in errors\" :key=\"idx\">\n        <Banner color=\"error\" :label=\"stringify(err)\" />\n      </div>\n    </div>\n    <div>\n      <div class=\"openstack-config\">\n        <div class=\"title\">\n          Openstack Configuration\n        </div>\n        <div v-if=\"authenticating\" class=\"loading\">\n          <i class=\"icon-spinner icon-spin icon-lg\" />\n          <span>\n            Authenticating with the Openstack server ...\n          </span>\n        </div>\n      </div>\n      <div class=\"row mt-10\">\n        <div class=\"col span-6\">\n          <LabeledSelect :value=\"flavors.selected\" @update:value=\"newValue => flavors.selected = newValue\"\n            label=\"Flavor\" :options=\"flavors.options\" :disabled=\"!flavors.enabled || busy\" :loading=\"flavors.busy\"\n            :searchable=\"false\" />\n        </div>\n\n        <div class=\"col span-6\">\n          <LabeledSelect :value=\"images.selected\" @update:value=\"newValue => images.selected = newValue\" label=\"Image\"\n            :options=\"images.options\" :disabled=\"!images.enabled || busy\" :loading=\"images.busy\" :searchable=\"false\" />\n        </div>\n      </div>\n      <div class=\"row mt-10\">\n        <div class=\"col span-6\">\n          <LabeledSelect :value=\"securityGroups.selected\" @update:value=\"newValue => securityGroups.selected = newValue\"\n            label=\"Security Groups\" :options=\"securityGroups.options\" :disabled=\"!securityGroups.enabled || busy\"\n            :loading=\"securityGroups.busy\" :searchable=\"false\" />\n        </div>\n        <div class=\"col span-6\">\n          <LabeledSelect :value=\"networks.selected\" @update:value=\"newValue => networks.selected = newValue\"\n            label=\"Networks\" :options=\"networks.options\" :disabled=\"!networks.enabled || busy\" :loading=\"networks.busy\"\n            :searchable=\"false\" />\n        </div>\n      </div>\n      <div class=\"row mt-10\">\n        <div class=\"col span-6\">\n          <LabeledInput :value=\"sshUser\" @update:value=\"newValue => sshUser = newValue\" :mode=\"mode\" :disabled=\"busy\"\n            label=\"SSH User ID\" placeholder=\"ubuntu\" />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<style scoped lang=\"scss\">\n.file-button {\n  align-items: center;\n  position: absolute;\n  top: 0;\n  right: 0;\n  height: 100%;\n  display: flex;\n\n  >.file-selector {\n    height: calc($input-height - 2px);\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0;\n  }\n}\n\n.openstack-config {\n  display: flex;\n  align-items: center;\n\n  >.title {\n    font-weight: bold;\n    padding: 4px 0;\n  }\n\n  >.loading {\n    margin-left: 20px;\n    display: flex;\n    align-items: center;\n\n    >i {\n      margin-right: 4px;\n      ;\n    }\n  }\n}\n</style>\n","import { render } from \"./viarezo.vue?vue&type=template&id=67d5891a&scoped=true\"\nimport script from \"./viarezo.vue?vue&type=script&lang=js\"\nexport * from \"./viarezo.vue?vue&type=script&lang=js\"\n\nimport \"./viarezo.vue?vue&type=style&index=0&id=67d5891a&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-67d5891a\"]])\n\nexport default __exports__","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".file-button[data-v-67d5891a]{align-items:center;position:absolute;top:0;right:0;height:100%;display:flex}.file-button>.file-selector[data-v-67d5891a]{height:59px;border-top-left-radius:0;border-bottom-left-radius:0}.openstack-config[data-v-67d5891a]{display:flex;align-items:center}.openstack-config>.title[data-v-67d5891a]{font-weight:700;padding:4px 0}.openstack-config>.loading[data-v-67d5891a]{margin-left:20px;display:flex;align-items:center}.openstack-config>.loading>i[data-v-67d5891a]{margin-right:4px}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-23.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-23.use[4]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./viarezo.vue?vue&type=style&index=0&id=67d5891a&scoped=true&lang=scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"4652b18c\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","var map = {\n\t\"./csp/metadata.json\": 6471,\n\t\"./federal/metadata.json\": 1862,\n\t\"./rgs/metadata.json\": 8401,\n\t\"./suse/metadata.json\": 7259\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1177;"],"names":["Openstack","constructor","$store","obj","_defineProperty","annotations","Object","keys","forEach","key","p","split","length","field","this","$dispatch","dispatch","getToken","endpoint","replace","baseUrl","url","data","auth","identity","methods","password","user","name","username","domain","domainName","projectId","scope","project","id","headers","Accept","res","method","redirectUnauthorized","root","_status","error","token","_headers","userId","domainId","console","log","regionsFromCatalog","catalog","endpoints","service","iface","find","svc","interface","region_id","region","type","includes","push","map","e","getFlavors","value","initial","getOptions","undefined","getImages","getKeyPairs","v","keypair","getSecurityGroups","getFloatingIpPools","getNetworkNames","network","label","getAvailabilityZones","zone","zoneName","api","mapper","busy","enabled","selected","makeComputeRequest","list","k","options","convertToOptions","found","option","getProjects","projects","getRegions","regions","sorted","sort","a","b","localeCompare","class","_createElementVNode","_hoisted_5","_hoisted_6","_createElementBlock","_ctx","$fetchState","pending","_createBlock","_component_Loading","delayed","$data","errors","_hoisted_1","_Fragment","_renderList","err","idx","_createVNode","_component_Banner","color","$options","stringify","_hoisted_2","_hoisted_3","authenticating","_hoisted_4","_hoisted_7","_hoisted_8","_hoisted_9","_component_LabeledSelect","flavors","_cache","newValue","disabled","$props","loading","searchable","_hoisted_10","images","_hoisted_11","_hoisted_12","securityGroups","_hoisted_13","networks","_hoisted_14","_hoisted_15","_component_LabeledInput","sshUser","mode","placeholder","initOptions","components","Banner","Loading","LabeledInput","LabeledSelect","mixins","CreateEditView","props","uuid","String","required","cluster","default","credentialId","Boolean","provider","fetch","_VIEW","initForViewMode","credential","NORMAN","CLOUD_CREDENTIAL","secret","SECRET","atob","ready","os","then","$emit","flavorName","imageName","secGroups","netName","watch","$fetch","fakeSelectOptions","flavorId","imageId","netId","syncValue","authUrl","endpointType","availabilityZone","test","__exports__","render","___CSS_LOADER_EXPORT___","module","content","__esModule","locals","exports","add","webpackContext","req","webpackContextResolve","__webpack_require__","o","Error","code","resolve"],"sourceRoot":""}